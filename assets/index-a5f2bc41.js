import _ from"./index-9eb8ef13.js";import{f as u}from"./fabric-e75cd5cd.js";import{u as Y,_ as q}from"./index-10e24cf3.js";import{r as x,o as K,h,j as d,B as V,I as M,m as w,F as O,N as S,R as f,n as R,K as k,a1 as $,a2 as AA}from"./vue-e0e31f72.js";/* empty css              */import"./arco-38a32e5c.js";function eA(){const{$pub:c}=Y(),{slBaseRandomString:o}=c,A={contentId:o(),id:o(),width:0,height:0},r={mode:null,drawingObj:null,isDrawing:!1,isMoving:!1,needSerialization:["freeDraw","line","text","rect","circle","triangle","delete"],fill:!1,goBackTag:-1,catchStep:[],textBox:null,polPointArray:[],polLineArray:[],polStartCircle:null,pointCol:{startPoint:{},endPoint:{}},penProps:{color:"#000",strokeWidth:1,fontSize:20}},i=x({data:[],type:{select:{value:"select",label:"选择"},delete:{value:"delete",label:"删除"},move:{value:"move",label:"移动"}}}),a=x({data:[],type:{amplify:{value:"amplify",label:"放大"},reduce:{value:"reduce",label:"缩小"},back:{value:"back",label:"上一步"},next:{value:"next",label:"下一步"},save:{value:"save",label:"保存 "},download:{value:"download",label:"下载 "}}}),g=x({data:[],type:{freeDraw:{value:"freeDraw",label:"自由绘制"},line:{value:"line",label:"直线"},text:{value:"text",label:"文本"},rect:{value:"rect",label:"矩形"},circle:{value:"circle",label:"圆"},triangle:{value:"triangle",label:"三角形"},polygon:{value:"polygon",label:"多边形"}}});return{fabricCanvasConfig:A,fabricDraw:r,fabricOperateBar:i,fabricOptionBar2:a,fabricModalBar:g,demoImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAYAAADL1t+KAAAAAXNSR0IArs4c6QAAHWNJREFUeF7t3YFx21YWBVCljLiNpIzYZSRlOC4jLsNxGU4bSRnZedIigmGS+AAB8OP6aMazszFJ/XfeJa9JUdIPX758+ffJBwECBAgQIHBqgR8U+qn35/AECBAgQOBZQKELAgECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEo1AgAABAgQUugwQIECAAIEAAYUesEQjECBAgAABhS4DBAgQIEAgQEChByzRCAQIECBAQKHLAAECBAgQCBBQ6AFLNAIBAgQIEFDoMkCAAAECBAIEFHrAEqcj/P3335tO9ebNm01ur871119/Pf3zzz9P0zPW5/jpp5+e/+z50cMZ9pyvl9uWweubkMFeUpp3DoWet9Onn3/+edOp3r9///T27dvVt/nnn38+ff78+bnMWz5++eWXp19//fVpq39I1Ofs4Qwts6dcRga/3aQMpqS73zkUer+7WXWy+tf/u3fvVl332pXWFnqd5cOHD98U+Y8//vhNWV8q+yr1+nPPRw9nuOf8Z7yuDH69NRk8Y4rPeWaFfs69XT11FeNvv/32/Pf1TPeeZ9bDJ7lUwHNsdY7ff//9+eX1+qjbqLPUma49867rfPz48at/ANTl63bWfPRwhjXnPvt1ZPB1gzJ49jSf6/wK/Vz7mj3t+MF07TPr2U8yc4HpM7SlL6FPHwTXlHoPZ7jX8azXl8GXzcngWRN83nMr9PPu7uLJ6+t09TJ3fTyq0OuZ+PDMfE0ZDw+G9UrDcDtLZ+nhDGHRah5HBl+oZLA5Mi64kYBC3wiyl5sZP5j+8ccfu79rfDp3vWRef+qj3rFeZ1j7MX6mVy/Z1221vFGuhzOsnTnhejL49HwfePT9ICFLZlgmoNCXeXV/6fEDySMKffys5NOnT00FfAt1PE/rm+R6OEP3QdnxgDL49bPzR90Pdlyxm+5UQKF3upi1xxo/mG7xQLLkHONnZq3lO3f7469D1rP0+hy3Pno4w9xM6X8vg69f9nrU/SA9Y+a7LKDQw5JR7wiv7/muj6MLvb7mPXz72ZafezzT3NfSezhDWKQWjyODj78fLF6aK0QIKPSINb4OMX4w/fLly2HTjZ9J3/u18+mhp98Gde3b2Ho4w2HgHX8iGXz5ORCPuh90HA1H21lAoe8MfPTNj5+hHlnoe7zUPbYbvi5+62X3Hs5w775rhi1+dsClcww/cnSv2x8+pwy+fJfJVi+3L70f3JtB1z+vgEI/7+4unnx4MG35evOWo4+fle3xZryWl3F7OMM9psPu9iiC8U8rm/uyxT0z1HVl8OVLXo+6H9y7P9c/r4BCP+/uLp58eCa79ct9c0x7Pysbv9HqWiH1cIY5p2t/X4U7/r77LUt9+qNH1/5sgNbZZPDldxbs8QpZy/2gdU8ulyeg0MN2+qgH0+GXcez1ysD46+jXyq6HM9wTpz1K/egyr/ll8OVHHc99R8aarLTcD9bcrutkCCj0jD3+N8VQans/Cxuz7flmtOHzjD/Hpdl6OMMWUdqy1B9R5mUgg9u/Ia71frBFBt3GeQUU+nl3d/Hklx5MhzdDXfpd5PWT1+rZxPC7yFt+Etv0E8+V7VbEw2yXvpzQwxm2mnOLUn9UmV8rdBncKh2v/2A6+stq203glvYSUOh7yT7gdselVi9L1x1++tvL5o5V11n6W9qOehnwVqH3cIY52yV/f0+pP7LMZfDlNx1u+R6IaW5u3Q+WZMxl8wQUetBOpz9VbfjFJjXi8Cx8eEZe/63+vq5T/zv9feRV7PXms5Zn7EeV6a1vXevhDFtHaU2pP7LMa34Z3L/QW76Fc+ssur1zCCj0c+yp6ZTjUhuuMDzbroK+9VEPxPUT5uqNPOPfYd7yC1GO+u1atx7IejhD05IWXmhJqT+6zGs0Gdz/Nx0q9IV3ou/o4go9aNnjB9Mq8OFl9yUjTkuh5et0PZRpD2dY4rzksi2l3kOZTwtdBt8uWXPzZRV6M9V3d0GF/t2tvG3g8fd0z309sIcy7eEMbbLrLnWr1Hsp83WTXb+WDF62UehbJy3n9hR6zi43nWT6tdBb31PbQ5n2cIZNF3Dhxi6Ven1J5cOHD/+9B+LIb1c8Yt53715+Lvrc93X3sP8ezrD3Ttx+3wIKve/9PPR0rb/lrIc3pPVwhiOWNS31KrrhPQ9JZT5YyuC3qfIM/Yh72jk/h0I/594OOXXrbzk7qky/p29bu7XgaanXZRPLvOaSwW+T4NvWDnn4O+UnUeinXNtxh275cao9/FCXHs5w1FamXzOvzzv3PoejzrbH55HBr1UV+h4py7hNhZ6xx92maH15b+8HmZbC7uEMuy3i/zd8qcyHz5la6jL4mqqW+8HeGXT7/Qoo9H5308XJWn+DWeuD7tqhWn7XeQ9nWDtfy/UuvZu9Snyv39LWcqYjLiODr8ot94MjduJz9Cmg0PvcSzenan0wbb3c2sHGvzby2u+Z7uEMa+ebu96tb01r+T71udvv+e9b99p6ubWzfu8ZXOvmescJKPTjrE/5mVofJMfvRr5WuPcAjM/x6dOniz+Stocz3DPjteu2fJ95cqnL4GsyWu4He2TQbZ5DQKGfY08PO2Xry9h7vxTY8saoHs6w9aJaynz4nKmlLoOvqWq5H2ydQbd3HgGFfp5dHX7S8Rtw5n4E7JLLLh2k9VuXejjD0tluXX5JmaeW+pKdLrns0j19rxlc6uTyjxVQ6I/17/qzL33Gu9fLgUteSu/hDFssdU2ZJ5a6DL6macn9YIsMuo3zCSj08+3ssBOPy7Hl6+LjB9+tftDJkh9BWzA9nOHeBd1T5mmlLoMvG116P7g3g65/TgGFfs697X7q8UuMcz9He3yY4eud9d+uvXltyeHHz0pav8+6hzMsmXF82S3KPKXUZfDys/PW+8HaDLreeQUU+nl3t+vJx6X4/v37p/r/LR/jZ8hL/iFw6bbX3tba6215hhar6WW2LPOEUpfBly1umec1uXSd8wgo9PPsavak9Yym3rx278f4Zc65N8Nd+lz3Xr9uc/zsrP5/y0v+47P0cIYle9ijzB9R6jL4uvWzZXBJXl22TwGF3udeVp2qHkCqGOoludZn1ONPVA/G9RL38Nu76hl2FembN28WnWf67VP1j4J6lt96O+NnJPWJ17zE2MMZFqE9PT3/xLfawVbvPxh//rHHGs/WWWTwVeqMGWzds8v1KaDQ+9zLqlONnxHUDVQxVJnWn2tlWgVSDzyfP3/+73dq13WXlvD0wNMHs+E89Q+NS68i1OXrLPXTuIZ/UKwt82vPTB9xhqWLrPmrcPf4GPa81+3XmWXw6831cD/YI0tus08Bhd7nXladqp7ZTot5fEP1jHv8MS7O8X/f8hnc+E1t185y6Rx11rWvNEzxejjDqoWe8EoyeHlpMnjCMJ/wyAr9hEubO3I9060/9eB6rbSntzE8k69n9a0vjc+dY/j74Sz1j425jyryeha/9bPIHs4wN3vS38vgt9uUwaSE9zmLQu9zL5udql7yq1If/nf6LLnKe4s30rUeeHiJf/oPjSryW18aaL39lsv1cIaWc6ZcRgYvl/u1++RR94OUfJnjVUChSwMBAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAAGFHrBEIxAgQIAAAYUuAwQIECBAIEBAoQcs0QgECBAgQEChywABAgQIEAgQUOgBSzQCAQIECBBQ6DJAgAABAgQCBBR6wBKNQIAAAQIEFLoMECBAgACBAIH/AVL+tV9faqM3AAAAAElFTkSuQmCC"}}function BA(){const{$pub:c}=Y(),{fabricCanvasConfig:o,fabricDraw:A,fabricOperateBar:r,fabricOptionBar2:i,fabricModalBar:a}=eA();let g=null;function b(t){c.slBasePolling(()=>F()).then(()=>{const Q=F(),e=Q.offsetWidth,B=Q.offsetHeight;o.width=e,o.height=B,g=new u.fabric.Canvas(o.id,{width:e,height:B,selection:!1}),m()})}function F(){return document.getElementById(o.contentId)}function m(){if(g){const t=r.value.type,Q=a.value.type;g.on("mouse:down",e=>{switch(A.isDrawing||A.mode===Q.polygon.value&&(A.polPointArray.push(e.absolutePointer),A.polStartCircle=new u.fabric.Circle({left:e.absolutePointer.x-5,top:e.absolutePointer.y-5,fill:"red",stroke:"#fff",strokeWidth:2,radius:5,selectable:!1}),g.add(A.polStartCircle)),A.isDrawing=!0,A.pointCol.startPoint=e.absolutePointer,A.mode){case t.select.value:break;case t.delete.value:g.getObjects().forEach(B=>{Object.getPrototypeOf(B).type!=="image"&&e.target===B&&(g.remove(B),p())});break;case t.move.value:A.isMoving=!0,A.pointCol.startPoint=e.pointer;break;case Q.text.value:W();break}}),g.on("mouse:move",e=>{const B=r.value.type,E=a.value.type,{mode:l,isMoving:s,pointCol:n,isDrawing:v}=A;if(l===B.move.value&&s){const I={x:e.pointer.x-n.startPoint.x,y:e.pointer.y-n.startPoint.y};g.relativePan(I),n.startPoint=e.pointer}if(v)switch(n.endPoint=e.absolutePointer,l){case E.line.value:U();break;case E.rect.value:H();break;case E.circle.value:C();break;case E.triangle.value:D();break;case E.polygon.value:U();break}}),g.on("mouse:up",e=>{const B=r.value.type,E=a.value.type,{mode:l,needSerialization:s,pointCol:n,polStartCircle:v}=A;switch(A.isDrawing=!1,A.drawingObj=null,J(),s.includes(l)&&p(),l){case B.move.value:A.isMoving=!1;break;case E.freeDraw.value:g.getObjects()[g.getObjects().length-1].selectable=!1;break;case E.polygon.value:const{polPointArray:I,polLineArray:j}=A;I.push(e.absolutePointer),n.startPoint=e.absolutePointer,A.isDrawing=!0;const y=v.getBoundingRect();if(I.slice(-1)[0].x>=y.left&&I.slice(-1)[0].x<=y.left+y.width&&I.slice(-1)[0].y>=y.top&&I.slice(-1)[0].y<=y.top+y.height){if(j.length<=1){A.isDrawing=!1,g.remove(v),A.polStartCircle=null,A.drawingObj=null,A.polPointArray=[],A.polLineArray=[];return}I.splice(-1,1),[n.endPoint]=I,[n.startPoint]=I.slice(-1),A.isDrawing=!1,g.remove(v),A.polStartCircle=null,g.remove(j.slice(-1)[0]),U(),A.drawingObj=null,A.polPointArray=[],A.polLineArray=[],p()}break}}),g.on("mouse:wheel",e=>{e.e.preventDefault();const B=e.e.deltaY>0?-.01:.01,E=g.getZoom()+B;z(!1,E)})}}function U(){const t=a.value.type,{mode:Q,pointCol:e,penProps:B,polLineArray:E}=A,l=new u.fabric.Line([e.startPoint.x,e.startPoint.y,e.endPoint.x,e.endPoint.y],{stroke:B.color,strokeWidth:B.strokeWidth,selectable:!1});Q===t.polygon&&E.push(l),L(g,l)}function H(){const{pointCol:t,fill:Q,penProps:e}=A,{startPoint:B,endPoint:E}=t,l=E.x-B.x>0,s=E.y-B.y>0,n=new u.fabric.Rect({left:l?B.x:E.x,top:s?B.y:E.y,width:Math.abs(E.x-B.x),height:Math.abs(E.y-B.y),fill:Q?e.color:"rgba(0, 0, 0, 0)",stroke:e.color,strokeWidth:e.strokeWidth,selectable:!1});L(g,n)}function C(){const{pointCol:t,fill:Q,penProps:e}=A,{startPoint:B,endPoint:E}=t,l=E.x-B.x>0,s=E.y-B.y>0,n=new u.fabric.Circle({left:l?B.x:E.x,top:s?B.y:E.y,fill:Q?e.color:"rgba(0, 0, 0, 0)",stroke:e.color,strokeWidth:e.strokeWidth,radius:Math.abs(E.x-B.x)/2,selectable:!1});L(g,n)}function D(){const{pointCol:t,fill:Q,penProps:e}=A,{startPoint:B,endPoint:E}=t,l=E.x-B.x>0,s=E.y-B.y>0,n=new u.fabric.Triangle({left:l?B.x:E.x,top:s?B.y:E.y,fill:Q?e.color:"rgba(0, 0, 0, 0)",stroke:e.color,strokeWidth:e.strokeWidth,height:Math.abs(E.y-B.y),width:Math.sqrt(3)*2*Math.abs(E.y-B.y)/3,selectable:!1});L(g,n)}function W(){const{pointCol:t,penProps:Q}=A;A.textBox=new u.fabric.Textbox("",{left:t.startPoint.x,top:t.startPoint.y,fontSize:Q.fontSize,stroke:Q.color,strokeWidth:Q.strokeWidth,selectable:!1}),g.add(A.textBox),A.textBox.enterEditing()}function N(){A.textBox&&(A.textBox.editable=!1,A.textBox.exitEditing(),A.textBox=null)}function L(t,Q){A.drawingObj&&g.remove(A.drawingObj),A.drawingObj=Q,t.add(Q)}function J(){A.pointCol.startPoint={},A.pointCol.endPoint={}}function p(){A.catchStep.push(JSON.stringify(g.toJSON()))}function P(t){g.loadFromJSON(JSON.parse(t),g.renderAll.bind(g),(Q,e)=>{e.selectable=!1})}function z(t,Q){let e=g.getZoom();t?e+=.05:e-=.05,Q&&(e=Q),e>10?e=10:e<.01&&(e=.01);const B=new u.fabric.Point(o.width/2,o.height/2);g.zoomToPoint(B,e)}function T(t){const Q=i.value.type;switch(t.value){case Q.amplify.value:z(!0);break;case Q.reduce.value:z(!1);break;case Q.back.value:if(-A.goBackTag===A.catchStep.length)return;A.goBackTag--;const e=A.goBackTag;P(A.catchStep.slice(e,e+1)[0]);break;case Q.next.value:if(A.goBackTag===-1)return;A.goBackTag++;const B=A.goBackTag;P(B===-1?A.catchStep.slice(B)[0]:A.catchStep.slice(B,B+1)[0]);break;case Q.save.value:X();break;case Q.download.value:G();break}}function X(){A.mode===a.value.type.text.value&&N()}function G(){const t=g.toDataURL({width:o.width,height:o.height,left:0,top:0,format:"png"}),Q=document.createElement("a");return Q.download="asd.png",Q.href=t,document.body.appendChild(Q),Q.click(),Q.remove(),t}function Z(t){if(t.value!==A.mode){const Q=r.value.type,e=a.value.type,B=g.getObjects();switch(r.value.data.forEach(E=>{E.select=!1}),a.value.data.forEach(E=>{E.select=!1}),t.select=!0,A.mode===e.text.value&&p(),A.mode=t.value,N(),g.isDrawingMode=!1,B.forEach(E=>{E.selectable=!1}),A.mode){case e.text.value:p();break;case e.freeDraw.value:g.isDrawingMode=!0,g.freeDrawingBrush.color=A.penProps.color,g.freeDrawingBrush.width=A.penProps.strokeWidth;break;case Q.select.value:B.forEach(E=>{E.selectable=!0});break}}}return K(()=>{const t=r.value.type,Q=i.value.type,e=a.value.type;for(const B in t)Object.hasOwnProperty.call(t,B)&&r.value.data.push(t[B]);for(const B in Q)Object.hasOwnProperty.call(Q,B)&&i.value.data.push(Q[B]);for(const B in e)Object.hasOwnProperty.call(e,B)&&a.value.data.push(e[B]);r.value.data.forEach(B=>{B.select=!1}),a.value.data.forEach(B=>{B.select=!1})}),{fabricCanvasContentId:o.contentId,fabricCanvasId:o.id,fabricOperateBar:r,fabricOptionBar2:i,fabricModalBar:a,fabricOperateBar2OnClick:T,fabricOperateAndModalOnSelect:Z,fabricInit:b}}const QA=c=>($("data-v-82eec69b"),c=c(),AA(),c),EA={class:"sl-layout-content"},gA=QA(()=>w("p",null,"测试",-1)),tA={class:"option-bar"},oA=["onClick"],aA=["onClick"],CA={class:"fabric-content"},lA={class:"modal-bar"},nA=["onClick"],rA=["id"],IA=["id"],sA={__name:"index",setup(c){const{fabricCanvasContentId:o,fabricCanvasId:A,fabricOperateBar:r,fabricOptionBar2:i,fabricModalBar:a,fabricOperateBar2OnClick:g,fabricOperateAndModalOnSelect:b,fabricInit:F}=BA();return K(()=>{F()}),(m,U)=>{const H=_;return h(),d("div",EA,[V(H,null,{title:M(()=>[gA]),extra:M(()=>[w("ul",tA,[(h(!0),d(O,null,S(f(r).data,C=>(h(),d("li",{key:C.value,onClick:D=>f(b)(C),class:R({select:C.select})},k(C.label),11,oA))),128)),(h(!0),d(O,null,S(f(i).data,C=>(h(),d("li",{key:C.value,onClick:D=>f(g)(C)},k(C.label),9,aA))),128))])]),default:M(()=>[w("div",CA,[w("div",lA,[w("ul",null,[(h(!0),d(O,null,S(f(a).data,C=>(h(),d("li",{key:C.value,onClick:D=>f(b)(C),class:R({select:C.select})},k(C.label),11,nA))),128))])]),w("div",{class:"draw-canvas",id:f(o)},[w("canvas",{id:f(A)},null,8,IA)],8,rA)])]),_:1})])}}},wA=q(sA,[["__scopeId","data-v-82eec69b"]]);export{wA as default};
